# SW-Digital-backend

信永中和大数据技术部，后端初试（机试）题。

### ***请以您的拼音名创建Issues，并将腾讯会议号放到评论中，以便面试官随时查看。***

## 1、初试内容简介

### 时间：2小时15分钟

其中：

* 2小时机试
* 5分钟以内成果展示及(或)代码讲解
* 10分钟以内面试

> ***注意***
>
> ***在机试结束前，请务必将您的Code提交至fork的代码仓库中。***
>
> 面试过程有问题电话联系面试官。

## 2、题目

一道必做题，两道选做题

### 2.1 接口

1. 请为前端同学设计如下页面所需接口
2. 倒推数据库设计，创建数据库（数据库不限）
3. 实现接口（框架不限）

> 其中：
> 
> 日期选择为季度: Q1(1-3)，Q2(4-6)，Q3(7-9)，Q4(10-12)

![](https://sw-interview.oss-cn-beijing.aliyuncs.com/image/backend_api_interview.png)

### 2.2 算法

有一组长度为n的对象，每个对象里都有一个startTime和endTime，表示一个时间段。请面试者设计一个小算法，把这些对象中时间段存在重合关系的所有对象列出来。

### 2.3 SQL（选做）

Orders 表中存所有用户的订单信息。每个订单有唯一键 Id，Customer_Id 和 Business_Id 是 Users 表中 Users_Id 的外键。Status 是枚举类型，枚举成员为 (‘completed’, ‘cancelled_by_b’, ‘cancelled_by_c’)。

```
+----+-----------+-----------+---------+--------------------+----------+
| Id |Customer_Id|Business_Id| City_Id |        Status      |Request_at|
+----+-----------+-----------+---------+--------------------+----------+
| 1  |     1     |    10     |    1    |     completed      |2018-11-11|
| 2  |     2     |    11     |    1    |   cancelled_by_b   |2018-11-11|
| 3  |     3     |    12     |    6    |     completed      |2018-11-11|
| 4  |     4     |    13     |    6    |   cancelled_by_c   |2018-11-11|
| 5  |     1     |    10     |    1    |     completed      |2018-11-12|
| 6  |     2     |    11     |    6    |     completed      |2018-11-12|
| 7  |     3     |    12     |    6    |     completed      |2018-11-12|
| 8  |     2     |    12     |    12   |     completed      |2018-11-13|
| 9  |     3     |    10     |    12   |     completed      |2018-11-13| 
| 10 |     4     |    13     |    12   |   cancelled_by_b   |2018-11-13|
+----+-----------+-----------+---------+--------------------+----------+
```

Users 表存所有用户。每个用户有唯一键 Users_Id。Banned 表示这个用户是否被禁止，Role 则是一个表示（‘customer’, ‘business’, ‘partner’）的枚举类型。

```
+----------+--------+--------+
| Users_Id | Banned |  Role  |
+----------+--------+--------+
|    1     |   No   |business|
|    2     |   Yes  |customer|
|    3     |   No   |customer|
|    4     |   No   |customer|
|    10    |   No   |business|
|    11    |   No   |business|
|    12    |   No   |business|
|    13    |   No   |business|
+----------+--------+--------+
```

写一段 SQL 语句查出 2018-11-11 至 2018-11-13 期间非禁止用户的取消率。基于上表，你的 SQL 语句应返回如下结果，取消率（Cancellation Rate）保留两位小数。

取消率的计算方式如下：(被商家或顾客取消的非禁止用户生成的订单数量) / (非禁止用户生成的订单总数)

```
+------------+-------------------+
|     Day    | Cancellation Rate |
+------------+-------------------+
| 2018-11-11 |       0.33        |
| 2018-11-12 |       0.00        |
| 2018-11-13 |       0.50        |
+------------+-------------------+
```

## End

祝您顺利
